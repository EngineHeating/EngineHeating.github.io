---
title: CPP核心编程
date: 2024-03-20 14:39:17
tags:
---
# CPP核心编程
## 1 内存分区模型
C++程序执行时，将内存大致分为4个区域：
- 代码区
- 全局区
- 栈区
- 堆区

### 1.1 程序运行前
程序编译后，生成了exe可执行文件，未执行该程序前分为两个区域：

代码区：

- 存放CPU执行的机器指令
- 代码区是**共享**的。对于被频繁执行的程序，只需存储一份代码
- 代码区是**只读**的。防止程序意外修改它的指令。

全局区：
- 存放全局变量(函数外定义的变量)、静态变量（static）、常量（3种）
- 该区域数据程序结束后由操作系统释放。

### 1.2 程序运行后
栈区：
- 编译器自动分配释放，存放函数的参数值，局部变量等；
- 注：不要返回局部变量的地址。

堆区：
- 堆区数据由程序员管理和释放
- 堆区数据由new关键字开辟内存
```cpp
int *p = new int(10);
```

### 1.3 new运算符
在堆区开辟数据，由delete释放。
```cpp
int *arr = new int[10]; //分配10个int数据组成的数组，arr指针指向第一个Int
delete[] arr;   //arr必须指向一个动态分配的数组或者为空
```

## 2 引用
### 2.1 基本操作
作用：给变量起别名
```cpp
int a = 10;
int &b = a; //给a起一个别名为b
```
- 引用必须初始化
- 引用一经初始化后不可更改

### 2.2 引用做函数参数及返回值
**作用**：函数传参时，可以用引用让形参修饰实参，简化指针修改实参。

**注意**：不要返回局部变量引用